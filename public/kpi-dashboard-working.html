<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPI Dashboard - Clean Working Version</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
        }
        
        .tab {
            padding: 12px 16px;
            cursor: pointer;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px 8px 0 0;
            font-size: 14px;
            font-weight: 500;
            min-width: 100px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .tab:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .tab.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
            transform: translateY(-3px);
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .tile {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #ddd;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .tile:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
        }
        
        .tile h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 16px;
            font-weight: 600;
        }
        
        .tile p {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
            color: #007bff;
        }
        
        .tile small {
            color: #666;
            font-size: 12px;
            font-weight: 500;
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .btn {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.2s ease;
        }
        
        .btn:hover {
            background: #0056b3;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        h2 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px;
            background-color: #d1ecf1;
            border-color: #b6d7e2;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const App = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [properties, setProperties] = useState([]);
            const [transactions, setTransactions] = useState([]);
            const [expenses, setExpenses] = useState([]);
            const [calls, setCalls] = useState({ made: 0, answered: 0 });
            const [appointments, setAppointments] = useState([]);
            const [gciData, setGciData] = useState({ gciGoal: 0, current: 0 });
            const [goals, setGoals] = useState({
                dailyCalls: 0,
                weeklyAppointments: 0,
                weeklyBuyerContracts: 0,
                weeklyOffers: 0,
                monthlyClosings: 0,
                annualGCI: 0
            });
            const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);
            const [dailyData, setDailyData] = useState({});
            
            // Calculate total commission
            const totalCommission = transactions.reduce((sum, t) => sum + (t.commission || 0), 0);
            
            // Add sample property function
            const addSampleProperty = () => {
                const newProperty = {
                    id: properties.length + 1,
                    address: `${Math.floor(Math.random() * 9999)} Sample St`,
                    client: 'John Doe',
                    status: 'Active',
                    price: Math.floor(Math.random() * 500000) + 200000,
                    type: 'Listing'
                };
                setProperties([...properties, newProperty]);
                
                // Add corresponding transaction
                const newTransaction = {
                    id: transactions.length + 1,
                    amount: newProperty.price,
                    commission: newProperty.status === 'Closed' ? newProperty.price * 0.025 : 0,
                    status: newProperty.status,
                    property: newProperty.address,
                    date: new Date().toISOString().split('T')[0]
                };
                setTransactions([...transactions, newTransaction]);
            };
            
            // Add sample expense function
            const addSampleExpense = () => {
                const categories = ['Travel', 'Marketing', 'Office', 'Staging', 'Photography'];
                const amounts = [50, 100, 200, 300, 500];
                const newExpense = {
                    id: expenses.length + 1,
                    category: categories[Math.floor(Math.random() * categories.length)],
                    amount: amounts[Math.floor(Math.random() * amounts.length)],
                    description: 'Sample expense item',
                    date: selectedDate,
                    hoursWorked: Math.floor(Math.random() * 8) + 1
                };
                setExpenses([...expenses, newExpense]);
            };
            
            return (
                <div className="container">
                    <h1>Real Estate KPI Dashboard</h1>
                    <div style={{textAlign: 'right', color: '#666', fontSize: '12px', marginBottom: '20px'}}>
                        Last updated: {new Date().toLocaleString()}
                    </div>
                    
                    {/* Tab Navigation */}
                    <div className="tabs">
                        <div 
                            className={`tab ${activeTab === 'dashboard' ? 'active' : ''}`}
                            onClick={() => setActiveTab('dashboard')}
                        >
                            📊 Dashboard
                        </div>
                        <div 
                            className={`tab ${activeTab === 'goals' ? 'active' : ''}`}
                            onClick={() => setActiveTab('goals')}
                        >
                            🎯 Goals
                        </div>
                        <div 
                            className={`tab ${activeTab === 'transactions' ? 'active' : ''}`}
                            onClick={() => setActiveTab('transactions')}
                        >
                            💰 Transactions
                        </div>
                        <div 
                            className={`tab ${activeTab === 'expenses' ? 'active' : ''}`}
                            onClick={() => setActiveTab('expenses')}
                        >
                            💳 Expenses
                        </div>
                    </div>
                    
                    {/* Dashboard Tab */}
                    {activeTab === 'dashboard' && (
                        <div>
                            <h2>📊 Dashboard Overview</h2>
                            <p style={{textAlign: 'center', color: '#666', marginBottom: '30px'}}>
                                Your key performance metrics at a glance
                            </p>
                            
                            <div className="grid">
                                <div className="tile" style={{background: 'linear-gradient(135deg, #e3f2fd, #bbdefb)'}}>
                                    <h4>Total Commission</h4>
                                    <p>${totalCommission.toLocaleString()}</p>
                                    <small>Year-to-date earnings</small>
                                </div>
                                <div className="tile" style={{background: 'linear-gradient(135deg, #e8f5e8, #c8e6c9)'}}>
                                    <h4>Active Listings</h4>
                                    <p>{properties.filter(p => p.status === 'Active').length}</p>
                                    <small>Properties on market</small>
                                </div>
                                <div className="tile" style={{background: 'linear-gradient(135deg, #fff3e0, #ffcc80)'}}>
                                    <h4>Closed Deals</h4>
                                    <p>{transactions.filter(t => t.status === 'Closed').length}</p>
                                    <small>Successful transactions</small>
                                </div>
                                <div className="tile" style={{background: 'linear-gradient(135deg, #f3e5f5, #e1bee7)'}}>
                                    <h4>Monthly Progress</h4>
                                    <p>{gciData.gciGoal > 0 ? Math.round((totalCommission / gciData.gciGoal) * 100) : 0}%</p>
                                    <small>Progress toward goal</small>
                                </div>
                            </div>
                            
                            <div style={{marginTop: '30px'}}>
                                <h3 style={{textAlign: 'center', marginBottom: '20px'}}>📞 Today's Activity</h3>
                                <div className="grid">
                                    <div className="tile">
                                        <h4>Calls Made</h4>
                                        <p>{calls.made}</p>
                                        <small>Today's outreach</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Call Success Rate</h4>
                                        <p>{calls.made > 0 ? Math.round((calls.answered / calls.made) * 100) : 0}%</p>
                                        <small>Answered calls rate</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Total Expenses</h4>
                                        <p>${expenses.reduce((sum, e) => sum + (e.amount || 0), 0).toLocaleString()}</p>
                                        <small>Business expenses</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="alert" style={{marginTop: '30px'}}>
                                <strong>Quick Stats:</strong> You have {properties.filter(p => p.status === 'Active').length} active listings, 
                                {properties.filter(p => p.status === 'Pending').length} pending sales, and have earned 
                                ${totalCommission.toLocaleString()} in commission this year.
                            </div>
                        </div>
                    )}
                    
                    {/* Goals Tab */}
                    {activeTab === 'goals' && (
                        <div>
                            <h2>🎯 Goals & Progress Tracking</h2>
                            <p style={{textAlign: 'center', color: '#666', marginBottom: '30px'}}>
                                Set your targets and track your daily progress toward success
                            </p>
                            
                            <div className="form-section">
                                <h3>📋 Goal Configuration</h3>
                                <div className="grid">
                                    <div className="form-group">
                                        <label>📞 Daily Calls Goal</label>
                                        <input 
                                            type="number" 
                                            value={goals.dailyCalls}
                                            onChange={(e) => setGoals({...goals, dailyCalls: parseInt(e.target.value) || 0})}
                                        />
                                    </div>
                                    <div className="form-group">
                                        <label>📅 Weekly Appointments Goal</label>
                                        <input 
                                            type="number" 
                                            value={goals.weeklyAppointments}
                                            onChange={(e) => setGoals({...goals, weeklyAppointments: parseInt(e.target.value) || 0})}
                                        />
                                    </div>
                                    <div className="form-group">
                                        <label>🏡 Monthly Closings Goal</label>
                                        <input 
                                            type="number" 
                                            value={goals.monthlyClosings}
                                            onChange={(e) => setGoals({...goals, monthlyClosings: parseInt(e.target.value) || 0})}
                                        />
                                    </div>
                                    <div className="form-group">
                                        <label>💰 Annual GCI Goal</label>
                                        <input 
                                            type="number" 
                                            value={goals.annualGCI}
                                            onChange={(e) => {
                                                const newGoals = {...goals, annualGCI: parseInt(e.target.value) || 0};
                                                setGoals(newGoals);
                                                setGciData({...gciData, gciGoal: newGoals.annualGCI});
                                            }}
                                        />
                                    </div>
                                </div>
                            </div>
                            
                            <div className="form-section">
                                <h3>📈 Daily Activity Tracking</h3>
                                <div className="form-group">
                                    <label>📅 Select Date</label>
                                    <input 
                                        type="date" 
                                        value={selectedDate}
                                        onChange={(e) => setSelectedDate(e.target.value)}
                                    />
                                </div>
                                <div className="grid">
                                    <div className="form-group">
                                        <label>📞 Calls Made</label>
                                        <input 
                                            type="number" 
                                            value={dailyData[selectedDate]?.callsMade || ''}
                                            onChange={(e) => {
                                                const value = parseInt(e.target.value) || 0;
                                                const currentData = dailyData[selectedDate] || {};
                                                setDailyData({
                                                    ...dailyData,
                                                    [selectedDate]: {...currentData, callsMade: value}
                                                });
                                                setCalls({...calls, made: value});
                                            }}
                                            placeholder="Enter calls made"
                                        />
                                    </div>
                                    <div className="form-group">
                                        <label>✅ Calls Answered</label>
                                        <input 
                                            type="number" 
                                            value={dailyData[selectedDate]?.callsAnswered || ''}
                                            onChange={(e) => {
                                                const value = parseInt(e.target.value) || 0;
                                                const currentData = dailyData[selectedDate] || {};
                                                setDailyData({
                                                    ...dailyData,
                                                    [selectedDate]: {...currentData, callsAnswered: value}
                                                });
                                                setCalls({...calls, answered: value});
                                            }}
                                            placeholder="Enter calls answered"
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Transactions Tab */}
                    {activeTab === 'transactions' && (
                        <div>
                            <h2>💰 Transactions & Properties</h2>
                            <p style={{textAlign: 'center', color: '#666', marginBottom: '30px'}}>
                                Manage your properties and track transaction progress
                            </p>
                            
                            <div style={{textAlign: 'center', marginBottom: '30px'}}>
                                <button className="btn" onClick={addSampleProperty}>
                                    ➕ Add Sample Property
                                </button>
                            </div>
                            
                            {properties.length === 0 ? (
                                <div className="alert">
                                    <strong>No properties yet!</strong> Click "Add Sample Property" to get started.
                                </div>
                            ) : (
                                <div className="grid">
                                    {properties.map(property => (
                                        <div key={property.id} className="tile">
                                            <h4>{property.address}</h4>
                                            <p>${property.price.toLocaleString()}</p>
                                            <small>
                                                {property.client} • {property.status}<br/>
                                                Type: {property.type}
                                            </small>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}
                    
                    {/* Expenses Tab */}
                    {activeTab === 'expenses' && (
                        <div>
                            <h2>💳 Expense Management</h2>
                            <p style={{textAlign: 'center', color: '#666', marginBottom: '30px'}}>
                                Track and manage your business expenses
                            </p>
                            
                            <div style={{textAlign: 'center', marginBottom: '30px'}}>
                                <button className="btn" onClick={addSampleExpense}>
                                    ➕ Add Sample Expense
                                </button>
                            </div>
                            
                            <div className="grid">
                                <div className="tile">
                                    <h4>Total Expenses</h4>
                                    <p>${expenses.reduce((sum, e) => sum + (e.amount || 0), 0).toLocaleString()}</p>
                                    <small>All business expenses</small>
                                </div>
                                <div className="tile">
                                    <h4>Monthly Average</h4>
                                    <p>${expenses.length > 0 ? Math.round(expenses.reduce((sum, e) => sum + (e.amount || 0), 0) / Math.max(1, new Set(expenses.map(e => e.date.substring(0, 7))).size)).toLocaleString() : 0}</p>
                                    <small>Average per month</small>
                                </div>
                                <div className="tile">
                                    <h4>Most Expensive Category</h4>
                                    <p>
                                        {(() => {
                                            if (expenses.length === 0) return 'None';
                                            const categories = {};
                                            expenses.forEach(e => {
                                                categories[e.category] = (categories[e.category] || 0) + e.amount;
                                            });
                                            const maxCategory = Object.keys(categories).reduce((a, b) => categories[a] > categories[b] ? a : b, '');
                                            return maxCategory || 'None';
                                        })()}
                                    </p>
                                    <small>Highest spending area</small>
                                </div>
                            </div>
                            
                            {expenses.length === 0 ? (
                                <div className="alert" style={{marginTop: '20px'}}>
                                    <strong>No expenses recorded yet!</strong> Click "Add Sample Expense" to get started.
                                </div>
                            ) : (
                                <div style={{marginTop: '30px'}}>
                                    <h3>Recent Expenses</h3>
                                    <div className="grid">
                                        {expenses.slice(-6).map(expense => (
                                            <div key={expense.id} className="tile">
                                                <h4>{expense.category}</h4>
                                                <p>${expense.amount.toLocaleString()}</p>
                                                <small>
                                                    {expense.description}<br/>
                                                    {expense.date} • {expense.hoursWorked}hrs
                                                </small>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    )}
                    
                    <div style={{marginTop: '30px', textAlign: 'center', color: '#666', fontSize: '12px'}}>
                        ✅ React Dashboard Working Correctly!
                    </div>
                </div>
            );
        };
        
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
