<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPI Dashboard - Complete</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Light Theme (Default) */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            transition: all 0.3s ease;
        }
        
        /* Dark Theme */
        body.dark-theme {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }

        /* Ocean Theme */
        body.ocean-theme {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
        }

        .ocean-theme .container {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            color: #333;
        }

        /* Forest Theme */
        body.forest-theme {
            background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
            color: #fff;
        }

        .forest-theme .container {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            color: #333;
        }

        /* Sunset Theme */
        body.sunset-theme {
            background: linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%);
            color: #333;
        }

        .sunset-theme .container {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            color: #333;
        }

        /* Purple Theme */
        body.purple-theme {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
        }

        .purple-theme .container {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .dark-theme .container {
            background: #2d2d2d;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 20px;
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .theme-toggle:hover {
            background: #0056b3;
            transform: scale(1.1);
        }
        
        .dark-theme .theme-toggle {
            background: #ffc107;
            color: #000;
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
        }
        .tab {
            padding: 12px 16px;
            cursor: pointer;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px 5px 0 0;
            font-size: 14px;
            font-weight: 500;
            min-width: 100px;
            text-align: center;
            white-space: nowrap;
            transition: all 0.2s ease;
        }
        
        .dark-theme .tab {
            background: #404040;
            border-color: #555;
            color: #e0e0e0;
        }
        
        .tab:hover {
            background: #e9ecef;
        }
        
        .dark-theme .tab:hover {
            background: #505050;
        }
        
        .tab.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .dark-theme .tab.active {
            background: #0056b3;
        }
        .tab-content {
            padding: 20px 0;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .tile {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #ddd;
            transition: transform 0.2s ease;
        }
        
        .dark-theme .tile {
            background: #404040;
            border-color: #555;
            color: #e0e0e0;
        }
        
        .tile:hover {
            transform: translateY(-2px);
        }
        .tile h4 {
            margin: 0 0 8px 0;
            color: #333;
            font-size: 14px;
        }
        .tile p {
            font-size: 22px;
            font-weight: bold;
            margin: 8px 0;
            color: #007bff;
        }
        .tile small {
            color: #666;
            font-size: 11px;
        }
        
        .dark-theme .tile h4 {
            color: #e0e0e0;
        }
        
        .dark-theme .tile p {
            color: #4dabf7;
        }
        
        .dark-theme .tile small {
            color: #aaa;
        }
        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .dark-theme .form-section {
            background: #404040;
            color: #e0e0e0;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        
        .dark-theme .form-group label {
            color: #e0e0e0;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .dark-theme .form-group input, 
        .dark-theme .form-group select, 
        .dark-theme .form-group textarea {
            background: #555;
            border-color: #666;
            color: #e0e0e0;
        }
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }
        .btn {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.2s ease;
            margin: 5px;
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn:active {
            transform: translateY(1px);
        }
        .btn.danger {
            background: #dc3545;
        }
        .btn.danger:hover {
            background: #c82333;
        }
        .timestamp {
            text-align: right;
            color: #666;
            font-size: 12px;
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .dark-theme h1 {
            color: #e0e0e0;
        }
        
        h2 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .dark-theme h2 {
            color: #e0e0e0;
        }
        
        h3 {
            color: #555;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        
        .dark-theme h3 {
            color: #e0e0e0;
        }
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px;
        }
        .alert-info {
            color: #0c5460;
            background-color: #d1ecf1;
            border-color: #b6d7e2;
        }
        
        .dark-theme .alert-info {
            color: #a6e9ed;
            background-color: #1c4d52;
            border-color: #2d6266;
        }
        
        .property-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }
        
        .property-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .dark-theme .property-item {
            background: #404040;
            border-color: #555;
            color: #e0e0e0;
        }
        
        .transaction-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .transaction-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .dark-theme .transaction-card {
            background: #404040;
            border-color: #555;
            color: #e0e0e0;
        }

        .input-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 5px 0;
        }

        .input-row input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .dark-theme .input-row input {
            background: #555;
            border-color: #666;
            color: #e0e0e0;
        }

        .expense-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .expense-modal-content {
            background: white;
            border-radius: 8px;
            padding: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .dark-theme .expense-modal-content {
            background: #2d2d2d;
            color: #e0e0e0;
        }

        /* Status indicators */
        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-active { background: #d4edda; color: #155724; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-closed { background: #d1ecf1; color: #0c5460; }
        .status-inactive { background: #f8d7da; color: #721c24; }

        .transaction-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                min-width: auto;
                width: 100%;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .transaction-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const App = () => {
            const [activeTab, setActiveTab] = useState('goals');
            const [properties, setProperties] = useState([]);
            const [transactions, setTransactions] = useState([]);
            const [expenses, setExpenses] = useState([]);
            const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);
            const [currentTheme, setCurrentTheme] = useState('light');
            const [showExpenseModal, setShowExpenseModal] = useState(false);
            const [selectedTransactionExpenses, setSelectedTransactionExpenses] = useState([]);
            
            // Goals state
            const [goals, setGoals] = useState(() => {
                const savedGoals = localStorage.getItem('kpiGoals');
                return savedGoals ? JSON.parse(savedGoals) : {
                    dailyCalls: 25,
                    weeklyAppointments: 10,
                    weeklyBuyerContracts: 2,
                    weeklyOffers: 5,
                    weeklyListings: 1,
                    monthlyClosings: 3,
                    annualGCI: 215000,
                    hoursWorked: 8
                };
            });
            
            // Daily data state
            const [dailyData, setDailyData] = useState(() => {
                const saved = localStorage.getItem('kpiDailyData');
                return saved ? JSON.parse(saved) : {};
            });
            
            // Daily inputs state
            const [dailyInputs, setDailyInputs] = useState({
                hoursWorked: 0,
                callsMade: 0,
                callsAnswered: 0,
                appointmentsSet: 0,
                offersWritten: 0,
                buyerContracts: 0,
                listingsObtained: 0
            });

            // Property form state
            const [propertyForm, setPropertyForm] = useState({
                address: '',
                client: '',
                type: 'Buy',
                price: '',
                status: 'Active'
            });

            // Expense form state
            const [expenseForm, setExpenseForm] = useState({
                propertyId: '',
                category: 'Marketing',
                amount: '',
                description: '',
                hoursWorked: ''
            });

            const themes = [
                { name: 'light', icon: 'L', label: 'Light' },
                { name: 'dark', icon: 'D', label: 'Dark' },
                { name: 'ocean', icon: 'O', label: 'Ocean' },
                { name: 'forest', icon: 'F', label: 'Forest' },
                { name: 'sunset', icon: 'S', label: 'Sunset' },
                { name: 'purple', icon: 'P', label: 'Purple' }
            ];
            
            // Load daily data when selected date changes
            useEffect(() => {
                if (dailyData[selectedDate]) {
                    setDailyInputs(dailyData[selectedDate]);
                } else {
                    setDailyInputs({
                        hoursWorked: 0,
                        callsMade: 0,
                        callsAnswered: 0,
                        appointmentsSet: 0,
                        offersWritten: 0,
                        buyerContracts: 0,
                        listingsObtained: 0
                    });
                }
            }, [selectedDate, dailyData]);
            
            // Save data to localStorage
            useEffect(() => {
                localStorage.setItem('kpiGoals', JSON.stringify(goals));
            }, [goals]);
            
            useEffect(() => {
                localStorage.setItem('kpiDailyData', JSON.stringify(dailyData));
            }, [dailyData]);

            // Sample data initialization
            useEffect(() => {
                const sampleProperties = [
                    { id: 1, address: '123 Main St', client: 'John Smith', type: 'Buy', price: 350000, status: 'Active', createdAt: '2025-07-15' },
                    { id: 2, address: '456 Oak Ave', client: 'Jane Doe', type: 'Sell', price: 425000, status: 'Pending', createdAt: '2025-07-14' }
                ];
                setProperties(sampleProperties);
                
                const sampleTransactions = [
                    { id: 1, propertyId: 1, address: '123 Main St', client: 'John Smith', price: 350000, commission: 8750, status: 'Active', type: 'Buy', closeDate: null },
                    { id: 2, propertyId: 2, address: '456 Oak Ave', client: 'Jane Doe', price: 425000, commission: 10625, status: 'Pending', type: 'Sell', closeDate: null }
                ];
                setTransactions(sampleTransactions);
                
                const sampleExpenses = [
                    { id: 1, propertyId: 1, category: 'Marketing', amount: 250, description: 'Facebook ads', date: '2025-07-15', hoursWorked: 2 },
                    { id: 2, propertyId: 1, category: 'Travel', amount: 45, description: 'Gas for showings', date: '2025-07-15', hoursWorked: 0 }
                ];
                setExpenses(sampleExpenses);
            }, []);
            
            // Theme toggle function
            const toggleTheme = () => {
                const currentIndex = themes.findIndex(theme => theme.name === currentTheme);
                const nextIndex = (currentIndex + 1) % themes.length;
                const newTheme = themes[nextIndex].name;
                setCurrentTheme(newTheme);
                document.body.className = newTheme === 'light' ? '' : `${newTheme}-theme`;
            };
            
            // Set initial theme
            useEffect(() => {
                document.body.className = currentTheme === 'light' ? '' : `${currentTheme}-theme`;
            }, [currentTheme]);

            // Property management functions
            const addProperty = (e) => {
                e.preventDefault();
                const newProperty = {
                    id: Date.now(),
                    ...propertyForm,
                    price: parseFloat(propertyForm.price) || 0,
                    createdAt: new Date().toISOString()
                };
                setProperties([...properties, newProperty]);
                
                // Create corresponding transaction
                const commission = propertyForm.status === 'Closed' ? newProperty.price * 0.025 : 0;
                const newTransaction = {
                    id: Date.now() + 1,
                    propertyId: newProperty.id,
                    address: propertyForm.address,
                    client: propertyForm.client,
                    price: newProperty.price,
                    commission: commission,
                    status: propertyForm.status,
                    type: propertyForm.type,
                    closeDate: propertyForm.status === 'Closed' ? new Date().toISOString().split('T')[0] : null
                };
                setTransactions([...transactions, newTransaction]);
                
                // Reset form
                setPropertyForm({
                    address: '',
                    client: '',
                    type: 'Buy',
                    price: '',
                    status: 'Active'
                });
            };
            
            const deleteProperty = (propertyId) => {
                setProperties(properties.filter(p => p.id !== propertyId));
                setTransactions(transactions.filter(t => t.propertyId !== propertyId));
                setExpenses(expenses.filter(e => e.propertyId !== propertyId));
            };
            
            const updateTransactionStatus = (transactionId, newStatus) => {
                setTransactions(transactions.map(transaction => {
                    if (transaction.id === transactionId) {
                        const updatedTransaction = { ...transaction, status: newStatus };
                        if (newStatus === 'Closed') {
                            updatedTransaction.commission = transaction.price * 0.025;
                            updatedTransaction.closeDate = new Date().toISOString().split('T')[0];
                        } else {
                            updatedTransaction.commission = 0;
                            updatedTransaction.closeDate = null;
                        }
                        return updatedTransaction;
                    }
                    return transaction;
                }));
            };

            // Expense management functions
            const addExpense = (e) => {
                e.preventDefault();
                const newExpense = {
                    id: Date.now(),
                    date: selectedDate,
                    ...expenseForm,
                    amount: parseFloat(expenseForm.amount) || 0,
                    hoursWorked: parseFloat(expenseForm.hoursWorked) || 0
                };
                setExpenses([...expenses, newExpense]);
                
                // Reset form
                setExpenseForm({
                    propertyId: '',
                    category: 'Marketing',
                    amount: '',
                    description: '',
                    hoursWorked: ''
                });
            };

            // Daily data functions
            const saveDailyData = () => {
                const newDailyData = { ...dailyData, [selectedDate]: dailyInputs };
                setDailyData(newDailyData);
            };

            const updateDailyInput = (field, value) => {
                setDailyInputs(prev => ({
                    ...prev,
                    [field]: parseInt(value) || 0
                }));
            };

            const updateGoal = (field, value) => {
                setGoals(prev => ({
                    ...prev,
                    [field]: parseInt(value) || 0
                }));
            };

            // Helper functions for calculations
            const getWeeklyTotal = (field) => {
                const today = new Date(selectedDate);
                const startOfWeek = new Date(today.setDate(today.getDate() - today.getDay() + 1));
                const weekDates = [];
                for (let i = 0; i < 7; i++) {
                    const date = new Date(startOfWeek);
                    date.setDate(date.getDate() + i);
                    weekDates.push(date.toISOString().split('T')[0]);
                }
                
                return weekDates.reduce((total, date) => {
                    const dayData = dailyData[date];
                    return total + (dayData ? (dayData[field] || 0) : 0);
                }, 0);
            };

            const getMonthlyTotal = (field) => {
                const currentMonth = selectedDate.substring(0, 7);
                return Object.keys(dailyData)
                    .filter(date => date.startsWith(currentMonth))
                    .reduce((total, date) => {
                        const dayData = dailyData[date];
                        return total + (dayData ? (dayData[field] || 0) : 0);
                    }, 0);
            };

            const showTransactionExpenses = (transaction) => {
                const transactionExpenses = expenses.filter(exp => exp.propertyId === transaction.propertyId);
                setSelectedTransactionExpenses(transactionExpenses);
                setShowExpenseModal(true);
            };

            const calculateTotalCommissions = () => {
                return transactions
                    .filter(t => t.status === 'Closed')
                    .reduce((sum, t) => sum + t.commission, 0);
            };

            const calculateTotalExpenses = () => {
                return expenses.reduce((sum, exp) => sum + exp.amount, 0);
            };

            const getStatusColor = (status) => {
                switch (status) {
                    case 'Active': return 'status-active';
                    case 'Pending': return 'status-pending';
                    case 'Closed': return 'status-closed';
                    case 'Inactive': return 'status-inactive';
                    default: return 'status-inactive';
                }
            };

            return (
                <div className="container">
                    <button className="theme-toggle" onClick={toggleTheme} title={`Switch to ${themes[(themes.findIndex(t => t.name === currentTheme) + 1) % themes.length].label} theme`}>
                        {themes.find(t => t.name === currentTheme)?.icon}
                    </button>
                    
                    <h1>Real Estate KPI Dashboard</h1>
                    <div className="timestamp">
                        Last updated: {new Date().toLocaleString()}
                    </div>
                    
                    <div className="tabs">
                        <div className={`tab ${activeTab === 'goals' ? 'active' : ''}`} onClick={() => setActiveTab('goals')}>
                            GOALS Daily
                        </div>
                        <div className={`tab ${activeTab === 'properties' ? 'active' : ''}`} onClick={() => setActiveTab('properties')}>
                            PROP Properties
                        </div>
                        <div className={`tab ${activeTab === 'transactions' ? 'active' : ''}`} onClick={() => setActiveTab('transactions')}>
                            TRANS Transactions
                        </div>
                        <div className={`tab ${activeTab === 'expenses' ? 'active' : ''}`} onClick={() => setActiveTab('expenses')}>
                            EXP Expenses
                        </div>
                        <div className={`tab ${activeTab === 'analytics' ? 'active' : ''}`} onClick={() => setActiveTab('analytics')}>
                            CHART Analytics
                        </div>
                    </div>
                    
                    <div className="tab-content">
                        {/* Goals Tab */}
                        {activeTab === 'goals' && (
                            <div>
                                <h2>Daily Goals & Progress Tracking</h2>
                                
                                <div className="form-section">
                                    <h3>Date Selection</h3>
                                    <div className="form-group">
                                        <label>Select Date:</label>
                                        <input
                                            type="date"
                                            value={selectedDate}
                                            onChange={(e) => setSelectedDate(e.target.value)}
                                        />
                                    </div>
                                </div>

                                <div className="form-section">
                                    <h3>Set Your Goals</h3>
                                    <div className="grid">
                                        <div className="input-row">
                                            <label>Daily Calls:</label>
                                            <input
                                                type="number"
                                                value={goals.dailyCalls}
                                                onChange={(e) => updateGoal('dailyCalls', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Weekly Appointments:</label>
                                            <input
                                                type="number"
                                                value={goals.weeklyAppointments}
                                                onChange={(e) => updateGoal('weeklyAppointments', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Weekly Buyer Contracts:</label>
                                            <input
                                                type="number"
                                                value={goals.weeklyBuyerContracts}
                                                onChange={(e) => updateGoal('weeklyBuyerContracts', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Weekly Offers:</label>
                                            <input
                                                type="number"
                                                value={goals.weeklyOffers}
                                                onChange={(e) => updateGoal('weeklyOffers', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Weekly Listings:</label>
                                            <input
                                                type="number"
                                                value={goals.weeklyListings}
                                                onChange={(e) => updateGoal('weeklyListings', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Monthly Closings:</label>
                                            <input
                                                type="number"
                                                value={goals.monthlyClosings}
                                                onChange={(e) => updateGoal('monthlyClosings', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Annual GCI:</label>
                                            <input
                                                type="number"
                                                value={goals.annualGCI}
                                                onChange={(e) => updateGoal('annualGCI', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Daily Hours Worked:</label>
                                            <input
                                                type="number"
                                                value={goals.hoursWorked}
                                                onChange={(e) => updateGoal('hoursWorked', e.target.value)}
                                            />
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="form-section">
                                    <h3>Daily Activities for {selectedDate}</h3>
                                    <div className="grid">
                                        <div className="input-row">
                                            <label>Hours Worked:</label>
                                            <input
                                                type="number"
                                                value={dailyInputs.hoursWorked}
                                                onChange={(e) => updateDailyInput('hoursWorked', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Calls Made:</label>
                                            <input
                                                type="number"
                                                value={dailyInputs.callsMade}
                                                onChange={(e) => updateDailyInput('callsMade', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Calls Answered:</label>
                                            <input
                                                type="number"
                                                value={dailyInputs.callsAnswered}
                                                onChange={(e) => updateDailyInput('callsAnswered', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Appointments Set:</label>
                                            <input
                                                type="number"
                                                value={dailyInputs.appointmentsSet}
                                                onChange={(e) => updateDailyInput('appointmentsSet', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Offers Written:</label>
                                            <input
                                                type="number"
                                                value={dailyInputs.offersWritten}
                                                onChange={(e) => updateDailyInput('offersWritten', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Buyer Contracts:</label>
                                            <input
                                                type="number"
                                                value={dailyInputs.buyerContracts}
                                                onChange={(e) => updateDailyInput('buyerContracts', e.target.value)}
                                            />
                                        </div>
                                        <div className="input-row">
                                            <label>Listings Obtained:</label>
                                            <input
                                                type="number"
                                                value={dailyInputs.listingsObtained}
                                                onChange={(e) => updateDailyInput('listingsObtained', e.target.value)}
                                            />
                                        </div>
                                    </div>
                                    <button className="btn" onClick={saveDailyData}>
                                        Save Daily Data
                                    </button>
                                </div>

                                <div className="grid">
                                    <div className="tile">
                                        <h4>Daily Call Progress</h4>
                                        <p>{dailyInputs.callsMade} / {goals.dailyCalls}</p>
                                        <small>{goals.dailyCalls > 0 ? Math.round((dailyInputs.callsMade / goals.dailyCalls) * 100) : 0}% Complete</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Weekly Appointments</h4>
                                        <p>{getWeeklyTotal('appointmentsSet')} / {goals.weeklyAppointments}</p>
                                        <small>{goals.weeklyAppointments > 0 ? Math.round((getWeeklyTotal('appointmentsSet') / goals.weeklyAppointments) * 100) : 0}% Complete</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Weekly Offers</h4>
                                        <p>{getWeeklyTotal('offersWritten')} / {goals.weeklyOffers}</p>
                                        <small>{goals.weeklyOffers > 0 ? Math.round((getWeeklyTotal('offersWritten') / goals.weeklyOffers) * 100) : 0}% Complete</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Current GCI</h4>
                                        <p>${calculateTotalCommissions().toLocaleString()}</p>
                                        <small>Goal: ${goals.annualGCI.toLocaleString()}</small>
                                    </div>
                                </div>
                            </div>
                        )}
                        
                        {/* Properties Tab */}
                        {activeTab === 'properties' && (
                            <div>
                                <h2>Property Management</h2>
                                
                                <div className="form-section">
                                    <h3>Add New Property</h3>
                                    <form onSubmit={addProperty}>
                                        <div className="grid">
                                            <div className="form-group">
                                                <label>Address:</label>
                                                <input
                                                    type="text"
                                                    value={propertyForm.address}
                                                    onChange={(e) => setPropertyForm({...propertyForm, address: e.target.value})}
                                                    required
                                                />
                                            </div>
                                            <div className="form-group">
                                                <label>Client:</label>
                                                <input
                                                    type="text"
                                                    value={propertyForm.client}
                                                    onChange={(e) => setPropertyForm({...propertyForm, client: e.target.value})}
                                                    required
                                                />
                                            </div>
                                            <div className="form-group">
                                                <label>Type:</label>
                                                <select
                                                    value={propertyForm.type}
                                                    onChange={(e) => setPropertyForm({...propertyForm, type: e.target.value})}
                                                >
                                                    <option value="Buy">Buy</option>
                                                    <option value="Sell">Sell</option>
                                                    <option value="Lease">Lease</option>
                                                </select>
                                            </div>
                                            <div className="form-group">
                                                <label>Price:</label>
                                                <input
                                                    type="number"
                                                    value={propertyForm.price}
                                                    onChange={(e) => setPropertyForm({...propertyForm, price: e.target.value})}
                                                />
                                            </div>
                                            <div className="form-group">
                                                <label>Status:</label>
                                                <select
                                                    value={propertyForm.status}
                                                    onChange={(e) => setPropertyForm({...propertyForm, status: e.target.value})}
                                                >
                                                    <option value="Active">Active</option>
                                                    <option value="Pending">Pending</option>
                                                    <option value="Closed">Closed</option>
                                                    <option value="Inactive">Inactive</option>
                                                </select>
                                            </div>
                                        </div>
                                        <button type="submit" className="btn">Add Property</button>
                                    </form>
                                </div>
                                
                                <div className="form-section">
                                    <h3>Properties ({properties.length})</h3>
                                    {properties.map(property => (
                                        <div key={property.id} className="property-item">
                                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                                <div>
                                                    <strong>{property.address}</strong>
                                                    <div>Client: {property.client}</div>
                                                    <div>Type: {property.type} | Price: ${property.price?.toLocaleString() || 'N/A'}</div>
                                                    <span className={`status-indicator ${getStatusColor(property.status)}`}>
                                                        {property.status}
                                                    </span>
                                                </div>
                                                <button 
                                                    className="btn danger"
                                                    onClick={() => deleteProperty(property.id)}
                                                >
                                                    Delete
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                        
                        {/* Transactions Tab */}
                        {activeTab === 'transactions' && (
                            <div>
                                <h2>Transaction Management</h2>
                                
                                <div className="grid">
                                    <div className="tile">
                                        <h4>Total Transactions</h4>
                                        <p>{transactions.length}</p>
                                        <small>All properties</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Active Deals</h4>
                                        <p>{transactions.filter(t => t.status === 'Active').length}</p>
                                        <small>Currently working</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Closed Deals</h4>
                                        <p>{transactions.filter(t => t.status === 'Closed').length}</p>
                                        <small>Successfully completed</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Total Commissions</h4>
                                        <p>${calculateTotalCommissions().toLocaleString()}</p>
                                        <small>From closed deals</small>
                                    </div>
                                </div>
                                
                                <div className="transaction-grid">
                                    {transactions.map(transaction => (
                                        <div key={transaction.id} className="transaction-card">
                                            <h4>{transaction.address}</h4>
                                            <div><strong>Client:</strong> {transaction.client}</div>
                                            <div><strong>Type:</strong> {transaction.type}</div>
                                            <div><strong>Price:</strong> ${transaction.price.toLocaleString()}</div>
                                            <div><strong>Commission:</strong> ${transaction.commission.toLocaleString()}</div>
                                            <div style={{margin: '10px 0'}}>
                                                <span className={`status-indicator ${getStatusColor(transaction.status)}`}>
                                                    {transaction.status}
                                                </span>
                                            </div>
                                            <div style={{display: 'flex', gap: '5px', flexWrap: 'wrap'}}>
                                                <button 
                                                    className="btn" 
                                                    onClick={() => updateTransactionStatus(transaction.id, 'Active')}
                                                    style={{fontSize: '12px', padding: '5px 10px'}}
                                                >
                                                    Active
                                                </button>
                                                <button 
                                                    className="btn" 
                                                    onClick={() => updateTransactionStatus(transaction.id, 'Pending')}
                                                    style={{fontSize: '12px', padding: '5px 10px'}}
                                                >
                                                    Pending
                                                </button>
                                                <button 
                                                    className="btn" 
                                                    onClick={() => updateTransactionStatus(transaction.id, 'Closed')}
                                                    style={{fontSize: '12px', padding: '5px 10px'}}
                                                >
                                                    Closed
                                                </button>
                                                <button 
                                                    className="btn" 
                                                    onClick={() => showTransactionExpenses(transaction)}
                                                    style={{fontSize: '12px', padding: '5px 10px', background: '#17a2b8'}}
                                                >
                                                    Expenses
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                        
                        {/* Expenses Tab */}
                        {activeTab === 'expenses' && (
                            <div>
                                <h2>Expense Tracking</h2>
                                
                                <div className="form-section">
                                    <h3>Add New Expense</h3>
                                    <form onSubmit={addExpense}>
                                        <div className="grid">
                                            <div className="form-group">
                                                <label>Property:</label>
                                                <select
                                                    value={expenseForm.propertyId}
                                                    onChange={(e) => setExpenseForm({...expenseForm, propertyId: e.target.value})}
                                                    required
                                                >
                                                    <option value="">Select Property</option>
                                                    {properties.map(property => (
                                                        <option key={property.id} value={property.id}>
                                                            {property.address} - {property.client}
                                                        </option>
                                                    ))}
                                                </select>
                                            </div>
                                            <div className="form-group">
                                                <label>Category:</label>
                                                <select
                                                    value={expenseForm.category}
                                                    onChange={(e) => setExpenseForm({...expenseForm, category: e.target.value})}
                                                >
                                                    <option value="Marketing">Marketing</option>
                                                    <option value="Travel">Travel</option>
                                                    <option value="Professional Services">Professional Services</option>
                                                    <option value="Office Supplies">Office Supplies</option>
                                                    <option value="Technology">Technology</option>
                                                    <option value="Other">Other</option>
                                                </select>
                                            </div>
                                            <div className="form-group">
                                                <label>Amount:</label>
                                                <input
                                                    type="number"
                                                    step="0.01"
                                                    value={expenseForm.amount}
                                                    onChange={(e) => setExpenseForm({...expenseForm, amount: e.target.value})}
                                                    required
                                                />
                                            </div>
                                            <div className="form-group">
                                                <label>Hours Worked:</label>
                                                <input
                                                    type="number"
                                                    step="0.5"
                                                    value={expenseForm.hoursWorked}
                                                    onChange={(e) => setExpenseForm({...expenseForm, hoursWorked: e.target.value})}
                                                />
                                            </div>
                                            <div className="form-group" style={{gridColumn: '1 / -1'}}>
                                                <label>Description:</label>
                                                <textarea
                                                    value={expenseForm.description}
                                                    onChange={(e) => setExpenseForm({...expenseForm, description: e.target.value})}
                                                    rows="3"
                                                />
                                            </div>
                                        </div>
                                        <button type="submit" className="btn">Add Expense</button>
                                    </form>
                                </div>
                                
                                <div className="grid">
                                    <div className="tile">
                                        <h4>Total Expenses</h4>
                                        <p>${calculateTotalExpenses().toLocaleString()}</p>
                                        <small>All properties</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Net Profit</h4>
                                        <p style={{color: calculateTotalCommissions() - calculateTotalExpenses() >= 0 ? '#28a745' : '#dc3545'}}>
                                            ${(calculateTotalCommissions() - calculateTotalExpenses()).toLocaleString()}
                                        </p>
                                        <small>Commissions - Expenses</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Total Expenses This Month</h4>
                                        <p>${expenses.filter(exp => exp.date.startsWith(selectedDate.substring(0, 7))).reduce((sum, exp) => sum + exp.amount, 0).toLocaleString()}</p>
                                        <small>{new Date(selectedDate).toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Average per Property</h4>
                                        <p>${properties.length > 0 ? Math.round(calculateTotalExpenses() / properties.length).toLocaleString() : '0'}</p>
                                        <small>Total expenses / properties</small>
                                    </div>
                                </div>
                                
                                <div className="form-section">
                                    <h3>Recent Expenses</h3>
                                    {expenses.length === 0 ? (
                                        <p>No expenses recorded yet.</p>
                                    ) : (
                                        expenses.slice().reverse().slice(0, 10).map(expense => {
                                            const property = properties.find(p => p.id == expense.propertyId);
                                            return (
                                                <div key={expense.id} className="property-item">
                                                    <div>
                                                        <strong>{property?.address || 'Unknown Property'}</strong>
                                                        <div>Category: {expense.category} | Amount: ${expense.amount}</div>
                                                        <div>Date: {expense.date} | Hours: {expense.hoursWorked || 0}</div>
                                                        <div>{expense.description}</div>
                                                    </div>
                                                </div>
                                            );
                                        })
                                    )}
                                </div>
                            </div>
                        )}
                        
                        {/* Analytics Tab */}
                        {activeTab === 'analytics' && (
                            <div>
                                <h2>Performance Analytics</h2>
                                
                                <div className="grid">
                                    <div className="tile">
                                        <h4>Conversion Rate</h4>
                                        <p>{Object.values(dailyData).reduce((sum, day) => sum + (day.callsMade || 0), 0) > 0 ? 
                                            Math.round((Object.values(dailyData).reduce((sum, day) => sum + (day.callsAnswered || 0), 0) / 
                                            Object.values(dailyData).reduce((sum, day) => sum + (day.callsMade || 0), 0)) * 100) : 0}%</p>
                                        <small>Calls answered vs made</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Total Activities</h4>
                                        <p>{Object.values(dailyData).reduce((sum, day) => 
                                            sum + (day.callsMade || 0) + (day.appointmentsSet || 0) + (day.offersWritten || 0), 0)}</p>
                                        <small>All tracked activities</small>
                                    </div>
                                    <div className="tile">
                                        <h4>Average Daily Hours</h4>
                                        <p>{Object.keys(dailyData).length > 0 ? 
                                            Math.round(Object.values(dailyData).reduce((sum, day) => sum + (day.hoursWorked || 0), 0) / Object.keys(dailyData).length * 10) / 10 : 0}</p>
                                        <small>Based on tracked days</small>
                                    </div>
                                    <div className="tile">
                                        <h4>ROI</h4>
                                        <p style={{color: calculateTotalExpenses() > 0 ? '#28a745' : '#666'}}>
                                            {calculateTotalExpenses() > 0 ? 
                                            Math.round((calculateTotalCommissions() / calculateTotalExpenses()) * 100) : 0}%</p>
                                        <small>Return on investment</small>
                                    </div>
                                </div>
                                
                                <div className="form-section">
                                    <h3>Weekly Summary</h3>
                                    <div className="grid">
                                        <div className="tile">
                                            <h4>This Week's Calls</h4>
                                            <p>{getWeeklyTotal('callsMade')}</p>
                                            <small>Goal: {goals.dailyCalls * 7}</small>
                                        </div>
                                        <div className="tile">
                                            <h4>This Week's Appointments</h4>
                                            <p>{getWeeklyTotal('appointmentsSet')}</p>
                                            <small>Goal: {goals.weeklyAppointments}</small>
                                        </div>
                                        <div className="tile">
                                            <h4>This Week's Offers</h4>
                                            <p>{getWeeklyTotal('offersWritten')}</p>
                                            <small>Goal: {goals.weeklyOffers}</small>
                                        </div>
                                        <div className="tile">
                                            <h4>This Week's Hours</h4>
                                            <p>{getWeeklyTotal('hoursWorked')}</p>
                                            <small>Goal: {goals.hoursWorked * 7}</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="form-section">
                                    <h3>Performance Insights</h3>
                                    <div className="alert alert-info">
                                        <strong>INSIGHT:</strong> Track your daily activities consistently to see meaningful analytics and trends. 
                                        Your current data shows {Object.keys(dailyData).length} days of tracked activities.
                                    </div>
                                    
                                    {Object.keys(dailyData).length > 7 && (
                                        <div className="alert alert-info">
                                            <strong>PROGRESS:</strong> Great job tracking for over a week! Your average daily performance is building up valuable insights.
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Expense Modal */}
                    {showExpenseModal && (
                        <div className="expense-modal">
                            <div className="expense-modal-content">
                                <h3>Property Expenses</h3>
                                {selectedTransactionExpenses.length === 0 ? (
                                    <p>No expenses recorded for this property.</p>
                                ) : (
                                    selectedTransactionExpenses.map(expense => (
                                        <div key={expense.id} style={{
                                            padding: '10px',
                                            border: '1px solid #ddd',
                                            borderRadius: '4px',
                                            margin: '10px 0'
                                        }}>
                                            <div><strong>{expense.category}</strong> - ${expense.amount}</div>
                                            <div>{expense.description}</div>
                                            <div>Date: {expense.date} | Hours: {expense.hoursWorked || 0}</div>
                                        </div>
                                    ))
                                )}
                                <div style={{marginTop: '20px', padding: '10px', background: '#f8f9fa', borderRadius: '4px'}}>
                                    <strong>Total Expenses: ${selectedTransactionExpenses.reduce((sum, exp) => sum + exp.amount, 0).toLocaleString()}</strong>
                                </div>
                                <button className="btn" onClick={() => setShowExpenseModal(false)}>
                                    Close
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };
        
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
